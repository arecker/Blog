#+TITLE: jekyll-recker
#+SLUG: jekyll-recker.html
#+PERMALINK: jekyll-recker.html
#+STARTUP: showall
#+DESCRIPTION: my website's custom jekyll plugin

This is the jekyll plugin for my personal website.

* Installation

Add =jekyll-recker= to the =jekyll_plugins= group of your =Gemfile=.

#+BEGIN_SRC ruby
  group :jekyll_plugins do
    gem 'jekyll-recker'
  end
#+END_SRC

Add =jekyll-recker= to the list of plugins in jekyll's =_config.yml=.

#+BEGIN_SRC yaml
  # _config.yaml
  plugins:
    - jekyll-recker
#+END_SRC

Set the theme.

#+BEGIN_SRC yaml
theme: jekyll-recker
#+END_SRC

Install and enjoy.

#+BEGIN_SRC sh
bundle install
bundle exec jekyll serve
#+END_SRC

* Usage

** Commands

*** =tweet=

The =tweet= command tweets a link to the latest published jekyll blog
post.

Ensure the following environment variables are set,.

#+BEGIN_SRC sh
  export ACCESS_TOKEN_SECRET="..."
  export ACCESS_TOKEN="..."
  export CONSUMER_API_KEY="..."
  export CONSUMER_API_SECRET="..."
#+END_SRC

Alternatively, configure which commands to run to fetch the secrets.

#+BEGIN_SRC yaml
# _config.yml
recker:
  twitter:
    access_token_secret_cmd: cat secrets/access-token-secret
    access_token_cmd: cat secrets/access-token
    consumer_api_key_cmd: cat secrets/consumer-api-key
    consumer_api_secret_cmd: cat secrets/consumer-api-secret-key
#+END_SRC

Run =bundle exec jekyll tweet= to let it rip!

[[assets/images/example-tweet.png]]

** Generators

*** =stats=

On build time, =jekyll-recker= calculates and stores the following
stats in the =site.data.stats= object, which are by default rendered in a
widget on the home page layout.

[[assets/images/example-stats.png]]

If you'd like, you can override the template with your own stats
widget by providing your own =_includes/stats.html=.

| Field Name      | Field Description                                    |
|-----------------+------------------------------------------------------|
| =posts=         | The total number of published posts.                 |
| =words.total=   | The total number of words from all published post.   |
| =words.average= | The average number of words for each published post. |
| =days.days=     | Current streak of daily, consecutive posts.          |
| =days.start=    | First day of current streak.                         |
| =days.end=      | Last day of current streak.                          |

Example:

#+BEGIN_SRC html
    <!-- _includes/stats.html -->

    <table>
      <tr>
        <th>Total Posts</th>
        <th>Total Words</th>
        <th>Average Words per Post</th>
        <th>Current Streak</th>
        <th>First day of current streak</th>
        <th>Last day of current streak</th>
      </tr>
      <tr>
        <td>{{ site.data.stats.posts }}</td>
        <td>{{ site.data.stats.words.total }}</td>
        <td>{{ site.data.stats.words.average }}</td>
        <td>{{ site.data.stats.days.days }}</td>
        <td>{{ site.data.stats.days.start }}</td>
        <td>{{ site.data.stats.days.end }}</td>
      </tr>
    </table>
#+END_SRC
